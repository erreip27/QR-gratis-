<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de QR Fun Red/Black – Erreip</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Chewy&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script src="https://cdn.jsdelivr.net/npm/qr-code-styling/lib/qr-code-styling.js"></script>

    <style>
        /* Variables y Base: Rojo y Negro Vibrante */
        :root {
            --primary-color: #FF3366; /* Rojo brillante/rosado para acentos y Fun Look */
            --secondary-color: #222222; /* Negro para texto y detalles, y botón de archivo */
            --danger-color: #A00000; /* Rojo oscuro para Quitar Logo */
            --background-light: #F5F5F5; /* Fondo gris muy suave/claro */
            --text-dark: #333333; /* Color de texto oscuro */
            --card-shadow: 0 8px 25px rgba(0, 0, 0, 0.15); 
            --border-radius: 18px; 
            
            /* FUENTES */
            --font-title: 'Chewy', cursive;
            --font-body: 'Poppins', sans-serif;
        }

        body {
            font-family: var(--font-body);
            background-color: var(--background-light);
            margin: 0;
            padding: 40px 20px;
            display: flex;
            flex-direction: column; /* Cambiado a columna para el footer */
            align-items: center;
            min-height: 100vh;
        }

        .container {
            max-width: 600px;
            width: 100%;
            background: white;
            padding: 35px;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            transition: all 0.3s ease;
        }

        /* ESTILOS DE FUENTE (CHASSIS Y CONTROLES) */
        h2 {
            font-family: var(--font-title); 
            text-align: center;
            margin-bottom: 30px;
            color: var(--text-dark); 
            font-size: 2.5em; 
            border-bottom: 5px solid var(--primary-color);
            padding-bottom: 5px;
            display: inline-block;
            width: 100%;
        }
        
        .control-section legend {
            font-family: var(--font-title); 
            font-size: 1.5em;
            font-weight: 400; 
            color: var(--primary-color); 
            padding: 0 10px;
        }

        /* CONTROLES GENERALES */
        label {
            font-weight: 600;
            margin-top: 15px;
            display: block;
            color: var(--text-dark); 
            font-size: 1em;
        }

        input[type="text"], .color-input-container input[type="text"] {
            width: 100%;
            padding: 12px;
            margin-top: 5px;
            border-radius: 10px;
            border: 2px solid #e0e0e0; 
            box-sizing: border-box;
            transition: all 0.3s;
            font-size: 1em;
        }
        
        input[type="file"] {
             padding: 12px 0;
        }

        /* MEJORA CLAVE: SELECT PERSONALIZADO Y VISIBLE */
        select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            
            width: 100%;
            padding: 14px 40px 14px 15px; 
            margin-top: 5px;
            border-radius: 10px;
            border: 2px solid #e0e0e0; 
            box-sizing: border-box;
            transition: all 0.3s;
            font-size: 1em;
            background-color: #fcfcfc;
            
            /* Icono de flecha ROJA inyectado con SVG */
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23FF3366%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13.6-6.4H19a17.6%2017.6%200%200%200-13.6%206.4%2017.6%2017.6%200%200%200%200%2023.2l128%20128c4.8%204.8%2010.8%207.2%2017.2%207.2s12.4-2.4%2017.2-7.2l128-128c4.8-4.8%204.8-12.8%200-17.6z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 10px top 50%;
            background-size: 14px auto;
            cursor: pointer;
        }

        input:focus, select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(255, 51, 102, 0.2);
            outline: none;
        }
        
        /* Agrupación Fieldset para secciones */
        .control-section {
            border: 1px solid #eee;
            border-radius: var(--border-radius);
            padding: 15px 20px 25px;
            margin-bottom: 25px;
        }

        /* Controles de Color */
        .color-group {
            display: flex;
            align-items: stretch;
            gap: 10px;
            margin-top: 5px;
        }

        .color-group input[type="color"] {
            width: 50px;
            height: 48px;
            padding: 0;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background: transparent;
            overflow: hidden;
        }
        
        .color-group input[type="color"]::-webkit-color-swatch-wrapper { padding: 0; }
        .color-group input[type="color"]::-webkit-color-swatch { border: none; border-radius: 8px; }

        .color-input-container {
            flex-grow: 1;
        }
        
        /* Botones Generales */
        button {
            width: 100%;
            padding: 14px;
            margin-top: 10px;
            border: none;
            border-radius: 10px; 
            font-size: 1.05em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
            font-family: var(--font-body);
        }

        #remove-logo-btn {
            background: var(--danger-color); 
            box-shadow: 0 4px 10px rgba(160, 0, 0, 0.3);
        }
        
        #remove-logo-btn:hover {
            background: #800000;
            transform: translateY(-2px);
        }
        
        #download-btn {
            background: var(--primary-color); 
            margin-top: 25px;
            box-shadow: 0 6px 15px rgba(255, 51, 102, 0.4);
        }
        
        #download-btn:hover {
            background: #e62e5c; 
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 51, 102, 0.5);
        }
        
        /* Agrupación de Logo y Botón de Archivo ESTILIZADO */
        .logo-controls {
            display: grid;
            grid-template-columns: 1fr 120px;
            gap: 10px;
            align-items: end;
            margin-top: 15px;
        }

        /* Estilo del botón de seleccionar archivo (LABEL) */
        #custom-file-label {
            background: var(--secondary-color); /* Negro */
            color: white;
            padding: 12px 15px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            margin-bottom: 5px;
        }

        #custom-file-label:hover {
            background: #000000; 
        }

        #file-name-display {
            display: block;
            font-size: 0.85em;
            color: var(--text-dark);
            padding: 5px 0 0 5px; 
            font-weight: 500;
        }
        
        .logo-controls .file-input-container {
             grid-column: 1 / 3; 
             display: flex;
             flex-direction: column;
             justify-content: flex-end;
        }
        .logo-controls #remove-logo-btn {
            width: auto;
            grid-column: 2 / 3;
            margin-top: 0;
            padding: 12px 15px;
            font-size: 0.95em;
        }
        
        /* PREVISUALIZACIÓN DEL QR */
        #qr-preview {
            display: flex;
            justify-content: center;
            margin-top: 40px;
            padding: 20px;
            background: #fcfcfc;
            border-radius: var(--border-radius);
        }

        .qr-frame-container {
            position: relative;
            width: 320px; 
            height: 320px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #fff;
            border-radius: var(--border-radius);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        /* Estilos de Marcos */
        .frame-basic { border: 5px solid var(--secondary-color); border-radius: var(--border-radius); }
        .frame-rounded { border: 8px solid var(--primary-color); border-radius: 40px; } 
        .frame-dotted { border: 5px dotted var(--primary-color); border-radius: 0; box-shadow: none; } 
        
        .control-group { margin-bottom: 15px; }
        
        /* ------------------------------------ */
        /* ESTILOS Y ANIMACIÓN DEL FOOTER       */
        /* ------------------------------------ */
        .main-footer {
            width: 100%;
            max-width: 600px; /* Ajustar al ancho del contenedor principal */
            margin-top: 30px;
            padding: 20px 0;
            text-align: center;
            color: #999; 
            font-size: 0.9em;
        }

        .main-footer p {
            margin: 5px 0;
        }

        .main-footer .creator-name {
            font-weight: 700;
            color: var(--primary-color); 
            text-transform: uppercase;
            
            /* Efecto Neón/Glow Sutil */
            text-shadow: 0 0 5px rgba(255, 51, 102, 0.5); 
            
            /* Aplicar la animación de pulsación */
            animation: neon-pulse 2s infinite alternate; 
        }

        /* Definición de la Animación de Pulsación */
        @keyframes neon-pulse {
            0% {
                opacity: 0.8;
                text-shadow: 0 0 4px var(--primary-color), 0 0 10px rgba(255, 51, 102, 0.4);
            }
            100% {
                opacity: 1;
                text-shadow: 0 0 8px var(--primary-color), 0 0 15px rgba(255, 51, 102, 0.7);
            }
        }
        
        /* Media Queries para móviles */
        @media (max-width: 600px) {
            body { padding: 20px 10px; }
            .container { padding: 20px; }
            .qr-frame-container { width: 250px; height: 250px; }
            .logo-controls { grid-template-columns: 1fr; gap: 5px; }
            .logo-controls .file-input-container { grid-column: 1 / 2; }
            .logo-controls #remove-logo-btn { 
                grid-column: 1 / 2; 
                order: 3; 
            }
            .main-footer { max-width: 100%; }
        }
    </style>
</head>
<body>

<div class="container">
    <h2><i class="fas fa-magic"></i> Generador QR </h2>

    <fieldset class="control-section">
        <legend>Contenido y Logo</legend>
        <div class="control-group">
            <label for="qr-text">Contenido (Texto o enlace):</label>
            <input type="text" id="qr-text" placeholder="Escribe tu texto o link, ej: https://erreip.com" value="https://mi-enlace.com">
        </div>
        
        <label for="qr-logo">Subir Logo (opcional):</label>
        <div class="logo-controls">
            <div class="file-input-container">
                <input type="file" id="qr-logo" accept="image/*" style="display: none;">
                <label for="qr-logo" id="custom-file-label"><i class="fas fa-upload"></i> Seleccionar Logo</label>
                <span id="file-name-display">Ningún archivo seleccionado.</span>
            </div>
            <button id="remove-logo-btn"><i class="fas fa-times-circle"></i> Quitar Logo</button>
        </div>
    </fieldset>
    
    <fieldset class="control-section">
        <legend>Colores y Fondo</legend>
        <div class="control-group">
            <label>Color del QR:</label>
            <div class="color-group">
                <input type="color" id="qr-color" value="#FF3366">
                <div class="color-input-container">
                    <input type="text" id="qr-color-hex" value="#FF3366" maxlength="7">
                </div>
            </div>
        </div>
        
        <div class="control-group">
            <label>Color de fondo:</label>
            <div class="color-group">
                <input type="color" id="qr-bg" value="#ffffff">
                 <div class="color-input-container">
                    <input type="text" id="qr-bg-hex" value="#FFFFFF" maxlength="7">
                </div>
            </div>
        </div>
    </fieldset>

    <fieldset class="control-section">
        <legend>Estilo y Forma del QR</legend>

        <div class="control-group">
            <label for="qr-shape">Forma de los Puntos Internos:</label>
            <select id="qr-shape">
                <option value="square">Cuadrado</option>
                <option value="dots">Puntos</option>
                <option value="rounded">Redondeado</option>
                <option value="classy" selected>Elegante</option>
                <option value="classy-rounded">Elegante Redondeado</option>
                <option value="extra-rounded">Extra Redondeado</option>
            </select>
        </div>
        
        <div class="control-group">
            <label for="qr-eyes-square">Forma del Contorno del Ojo:</label>
            <select id="qr-eyes-square">
                <option value="square" selected>Cuadrado</option>
                <option value="extra-rounded">Extra Redondeado</option>
                <option value="dot">Punto</option>
            </select>
        </div>
        
        <div class="control-group">
            <label for="qr-eyes-dot">Forma del Centro del Ojo:</label>
            <select id="qr-eyes-dot">
                <option value="square">Cuadrado</option>
                <option value="dots">Punto</option>
                <option value="rounded">Redondeado</option>
                <option value="classy" selected>Elegante</option>
                <option value="classy-rounded">Elegante Redondeado</option>
                <option value="extra-rounded">Extra Redondeado</option>
            </select>
        </div>
        
        <div class="control-group">
            <label for="qr-frame">Marco Decorativo (CSS):</label>
            <select id="qr-frame">
                <option value="">Sin Marco</option>
                <option value="frame-basic">Marco Básico Negro</option>
                <option value="frame-rounded" selected>Marco Redondeado Rojo</option>
                <option value="frame-dotted">Marco Punteado Rojo</option>
            </select>
        </div>
    </fieldset>

    <button id="download-btn" onclick="descargarQR()"> <i class="fas fa-download"></i> DESCARGAR QR</button>

    <div id="qr-preview">
        <div class="qr-frame-container"></div>
    </div>
</div>

<footer class="main-footer">
    <p>
         Creada por <span class="creator-name">Jean Pierre Leniz</span>
    </p>
    <p class="copyright">&copy; 2025 QR Generator Project. Todos los derechos reservados.</p>
</footer>

<script>
    // 1. Inicialización y Referencias
    const qrFrameContainer = document.querySelector('.qr-frame-container');
    
    // Referencias para el nuevo botón estilizado
    const fileInput = document.getElementById("qr-logo");
    const fileNameDisplay = document.getElementById("file-name-display");

    const qrColor = document.getElementById("qr-color").value;
    
    // Obtenemos los valores iniciales
    const defaultData = document.getElementById("qr-text").value;
    const defaultShape = document.getElementById("qr-shape").value;
    const defaultEyesSquare = document.getElementById("qr-eyes-square").value;
    const defaultEyesDot = document.getElementById("qr-eyes-dot").value;

    let qr = new QRCodeStyling({
        width: 300,
        height: 300,
        data: defaultData, 
        image: "",
        dotsOptions: { 
            color: qrColor, 
            type: defaultShape
        },
        backgroundOptions: { 
            color: document.getElementById("qr-bg").value
        },
        cornersSquareOptions: { 
            color: qrColor,
            type: defaultEyesSquare
        },
        cornersDotOptions: { 
            color: qrColor,
            type: defaultEyesDot
        },
        imageOptions: {
            crossOrigin: "anonymous", 
            margin: 10
        }
    });

    // Añadir el QR al contenedor (Mantiene la previsualización)
    qr.append(qrFrameContainer);

    // 2. Función principal de actualización del QR (Mantiene la funcionalidad en tiempo real)
    function updateQR() {
        const texto = document.getElementById("qr-text").value || "Enlace vacío";
        const color = document.getElementById("qr-color").value;
        const bg = document.getElementById("qr-bg").value;
        const shape = document.getElementById("qr-shape").value;
        const eyesSquare = document.getElementById("qr-eyes-square").value;
        const eyesDot = document.getElementById("qr-eyes-dot").value;
        const frameClass = document.getElementById("qr-frame").value;
        
        qr.update({
            data: texto,
            dotsOptions: { color: color, type: shape },
            backgroundOptions: { color: bg },
            cornersSquareOptions: { color: color, type: eyesSquare },
            cornersDotOptions: { color: color, type: eyesDot }
        });
        
        qrFrameContainer.className = 'qr-frame-container ' + frameClass;
    }

    // 3. Manejo de Logo (Actualizado para el nuevo botón)
    function handleLogoUpload() {
        if (fileInput.files.length > 0) {
            const file = fileInput.files[0];
            const reader = new FileReader();
            
            // Actualizar la etiqueta de texto con el nombre del archivo
            fileNameDisplay.textContent = file.name;
            
            reader.onload = () => {
                qr.update({
                    image: reader.result,
                    imageOptions: {
                        crossOrigin: "anonymous",
                        margin: 10,
                        hideBackgroundDots: true
                    }
                });
            };
            
            reader.readAsDataURL(file);
        } else {
            removeLogo();
        }
    }
    
    function removeLogo() {
        document.getElementById("qr-logo").value = null;
        fileNameDisplay.textContent = "Ningún archivo seleccionado."; // Restaurar el texto
        qr.update({ 
            image: "",
            imageOptions: { margin: 10, hideBackgroundDots: false } 
        });
    }

    // 4. Función de descarga
    function descargarQR() {
        qr.download({ name: "qr-code-erreip-red-black", extension: "png" });
    }
    
    // 5. Sincronizar color y texto HEX
    const qrColorInput = document.getElementById("qr-color");
    const qrColorHexInput = document.getElementById("qr-color-hex");
    const qrBgInput = document.getElementById("qr-bg");
    const qrBgHexInput = document.getElementById("qr-bg-hex");
    
    const formatHex = (hex) => hex.toUpperCase();

    function handleColorChange(colorPicker, hexInput) {
        hexInput.value = formatHex(colorPicker.value);
        updateQR();
    }
    
    function handleHexChange(colorPicker, hexInput) {
        let hex = formatHex(hexInput.value);
        hexInput.value = hex;
        if (/^#[0-9A-F]{6}$/i.test(hex)) {
            colorPicker.value = hex;
            updateQR();
        }
    }

    // Event Listeners
    qrColorInput.addEventListener('input', () => handleColorChange(qrColorInput, qrColorHexInput));
    qrColorHexInput.addEventListener('input', () => handleHexChange(qrColorInput, qrColorHexInput));
    qrBgInput.addEventListener('input', () => handleColorChange(qrBgInput, qrBgHexInput));
    qrBgHexInput.addEventListener('input', () => handleHexChange(qrBgInput, qrBgHexInput));

    document.getElementById("qr-text").addEventListener("input", updateQR);
    document.getElementById("qr-shape").addEventListener("change", updateQR);
    document.getElementById("qr-eyes-square").addEventListener("change", updateQR);
    document.getElementById("qr-eyes-dot").addEventListener("change", updateQR);
    document.getElementById("qr-frame").addEventListener("change", updateQR);
    
    // Event listener del archivo
    document.getElementById("qr-logo").addEventListener("change", handleLogoUpload);
    document.getElementById("remove-logo-btn").addEventListener("click", removeLogo);
    
    updateQR();
</script>

</body>
</html>
